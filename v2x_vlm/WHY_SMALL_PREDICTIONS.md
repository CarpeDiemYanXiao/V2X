# ä¸ºä»€ä¹ˆé¢„æµ‹å€¼è¿™ä¹ˆå°ï¼Ÿ

## ğŸ” é—®é¢˜

ä½ è§‚å¯Ÿåˆ°ç¬¬ä¸€ä¸ªepochçš„é¢„æµ‹å€¼éå¸¸å°ï¼š

```
GT: [35.89, -133.53]  â† çœŸå®å€¼èŒƒå›´å¾ˆå¤§
Pred: [-1.32, 3.17]   â† é¢„æµ‹å€¼å¾ˆå°
Range: Pred [-3.9, 4.0]  â† åªæœ‰4ç±³çš„èŒƒå›´ï¼
```

## ğŸ’¡ åŸå› åˆ†æ

### ä¸æ˜¯å› ä¸ºç›¸å¯¹åæ ‡ï¼

æ•°æ®ç¡®å®ä½¿ç”¨äº†ç›¸å¯¹åæ ‡ï¼ˆè‡ªè½¦åæ ‡ç³»ï¼‰ï¼Œä½†è¿™ä¸æ˜¯é—®é¢˜çš„åŸå› ã€‚

### çœŸæ­£çš„åŸå› ï¼šå¤šå±‚å°æƒé‡ç›¸ä¹˜

ä½ çš„é¢„æµ‹å¤´æœ‰4å±‚ç½‘ç»œï¼š

```python
self.traj_head = nn.Sequential(
    nn.Linear(hidden_dim, hidden_dim * 2),      # ç¬¬1å±‚ï¼šxavieråˆå§‹åŒ–ï¼ˆå°ï¼‰
    nn.GELU(),
    nn.Dropout(0.1),
    nn.Linear(hidden_dim * 2, hidden_dim * 2),  # ç¬¬2å±‚ï¼šxavieråˆå§‹åŒ–ï¼ˆå°ï¼‰
    nn.GELU(),
    nn.Dropout(0.1),
    nn.Linear(hidden_dim * 2, hidden_dim),      # ç¬¬3å±‚ï¼šxavieråˆå§‹åŒ–ï¼ˆå°ï¼‰
    nn.GELU(),
    nn.Dropout(0.05),
    nn.Linear(hidden_dim, self.future_steps * 2)  # ç¬¬4å±‚ï¼šstd=0.1ï¼ˆå°ï¼‰
)
```

**é—®é¢˜**ï¼š
- åªæœ‰æœ€åä¸€å±‚ç”¨äº†std=0.1
- å‰é¢3å±‚ç”¨çš„æ˜¯xavieråˆå§‹åŒ–ï¼ˆstdæ›´å°ï¼Œçº¦0.01-0.02ï¼‰
- å¤šå±‚å°æƒé‡ç›¸ä¹˜ â†’ è¾“å‡ºéå¸¸å°

**æ•°å­¦è§£é‡Š**ï¼š
```
å‡è®¾æ¯å±‚æƒé‡çš„std=0.02ï¼Œ4å±‚ç›¸ä¹˜ï¼š
è¾“å‡º â‰ˆ è¾“å…¥ Ã— 0.02 Ã— 0.02 Ã— 0.02 Ã— 0.1 = è¾“å…¥ Ã— 0.000008

å³ä½¿è¾“å…¥ç‰¹å¾å¾ˆå¤§ï¼ˆæ¯”å¦‚100ï¼‰ï¼Œè¾“å‡ºä¹Ÿåªæœ‰ï¼š
100 Ã— 0.000008 = 0.0008  â† éå¸¸å°ï¼
```

## âœ… è§£å†³æ–¹æ¡ˆ

### ä¿®å¤ï¼šè®©æ‰€æœ‰å±‚éƒ½ä½¿ç”¨æ›´å¤§çš„åˆå§‹åŒ–

```python
# æœ€åä¸€å±‚ï¼šä½¿ç”¨æ›´å¤§çš„std
nn.init.normal_(module.weight, mean=0.0, std=0.5)  # ä»0.1æé«˜åˆ°0.5

# ä¸­é—´å±‚ï¼šä½¿ç”¨Kaimingåˆå§‹åŒ–ï¼ˆæ¯”Xavierå¤§ï¼‰
nn.init.kaiming_normal_(module.weight, mode='fan_out', nonlinearity='relu')

# ç‰¹å¾èåˆå±‚ï¼šä¹Ÿä½¿ç”¨Kaimingåˆå§‹åŒ–
for module in self.feature_fusion.modules():
    if isinstance(module, nn.Linear):
        nn.init.kaiming_normal_(module.weight, mode='fan_out', nonlinearity='relu')
```

**Kaiming vs Xavier**ï¼š
- Xavier: std â‰ˆ sqrt(2 / (fan_in + fan_out)) â‰ˆ 0.01-0.02
- Kaiming: std â‰ˆ sqrt(2 / fan_in) â‰ˆ 0.05-0.1ï¼ˆæ›´å¤§ï¼‰

## ğŸ“Š é¢„æœŸæ”¹å–„

### ä¿®å¤å‰ï¼ˆå½“å‰ï¼‰ï¼š
```
PredèŒƒå›´: [-3.9, 4.0]  â† åªæœ‰4ç±³
```

### ä¿®å¤åï¼ˆé¢„æœŸï¼‰ï¼š
```
PredèŒƒå›´: [-30, 40]  â† åº”è¯¥æœ‰40-50ç±³çš„èŒƒå›´
```

## ğŸš€ é‡æ–°è®­ç»ƒ

```bash
# åˆ é™¤æ—§æ¨¡å‹
rm -rf ./outputs/teacher_training_regression/teacher_best_regression.pth

# é‡æ–°è®­ç»ƒ
python scripts/train_teacher_regression.py
```

## ğŸ¯ åˆ¤æ–­æ ‡å‡†

**ç¬¬ä¸€ä¸ªepochåº”è¯¥çœ‹åˆ°**ï¼š

```
[Range] Pred: [-30, 40]  âœ… ä¸å†æ˜¯[-3.9, 4.0]
Val L2 Error: <53m  âœ… æ¯”ä¹‹å‰çš„55ç±³æ›´å¥½
```

å¦‚æœç¬¬ä¸€ä¸ªepochçš„é¢„æµ‹èŒƒå›´å°±è¾¾åˆ°30-40ç±³ï¼Œè¯´æ˜ä¿®å¤æˆåŠŸï¼

## ğŸ“ æ€»ç»“

**é—®é¢˜**ï¼šå¤šå±‚å°æƒé‡ç›¸ä¹˜ â†’ è¾“å‡ºå¤ªå°

**åŸå› **ï¼š
- åªæœ‰æœ€åä¸€å±‚ç”¨äº†std=0.1
- å‰é¢3å±‚ç”¨çš„æ˜¯xavierï¼ˆstdâ‰ˆ0.01ï¼‰
- 4å±‚ç›¸ä¹˜ï¼š0.01 Ã— 0.01 Ã— 0.01 Ã— 0.1 = 0.000001

**è§£å†³**ï¼š
- æœ€åä¸€å±‚ï¼šstdä»0.1æé«˜åˆ°0.5
- ä¸­é—´å±‚ï¼šä»xavieræ”¹ä¸ºkaimingï¼ˆæ›´å¤§ï¼‰
- ç‰¹å¾èåˆå±‚ï¼šä¹Ÿç”¨kaiming

**é¢„æœŸ**ï¼šåˆå§‹é¢„æµ‹èŒƒå›´ä»4ç±³æ‰©å¤§åˆ°40ç±³ï¼
